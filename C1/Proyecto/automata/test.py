from automata.fa.dfa import DFA



# dfa=DFA(
#     states={'q0', 'q1', 'q2', 'd'},
#     input_symbols={'0', '1'},
#     transitions={
#         'q0': {'0': 'd', '1': 'q1','eskeler':'q2'},
#         'q1': {'0': 'q2', '1': 'q1'},
#         'q2': {'0': 'q2', '1': 'q1'},
#         'd': {'0': 'd', '1': 'd'},
#     },
#     allow_partial=True,
#     initial_state='q0',
#     final_states={'q2'}
# )
# print(dfa.validate())
dfa=DFA(
    states= {'q0','q1','q2','q3','q4','q5','q6','q7','q8','q9','q10','q11','q12','q13','q14','q15','q16','q17','q18','q19','q20','q21','q22','q23','q24','q25','q26','q27','q28','q29','q30','q31','q32','q33','q34','q35','q36','q37','q38','q39','q40','q41','q42','q43','q44','q45','q46','q47','q48','q49','q50','q51','q52','q53','q54','q55','q56','q57','q58','q59','q60','q61','q62','q63','q64','q65','q66','q67','q68','q69','q70','q71','q72','q73','q74','q75','q76','q77','q78','q79','q80','q81','q82','q83','q84','q85','q86','q87','q88','q89','q90','q91','q92','q93','q94','q95','q96','q97','q98','q99','q100','q101','q102','q103','q104','q105','q106','q107','q108','q109','q110','q111','q112','q113','q114','q115','q116','q117','q118','q119','q120','q121','q122','q123','q124','q125','q126','q127','q128','q129','q130','q131','q132','q133','q134','q135','q136','q137','q138','q139','q140','q141','q142','q143','q144','q145','q146','q147','q148','q149','q150','q151','q152','q153','q154','q155','q156','q157','q158','q159','q160','q161','q162','q163','q164','q165','q166','q167','q168','q169','q170','q171','q172','q173','q174','q175','q176','q177','q178','q179','q180','q181','q182','q183','q184','q185','q186','q187','q188','q189','q190','q191','q192','q193','q194','q195','q196','q197','q198','q199','q200','q201','q202','q203','q204','q205','q206','q207','q208','q209','q210','q211','q212',},
    input_symbols={'+','"','#',' ','1','2','3','4','5','6','7','8','9','0','A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z','a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z','_','/','(',')',',','-','.','$','á','é','í','ó','ú','Í','Ó','Ú','Á','É','ñ','Ñ','ü','Ü',},
    transitions={
        #CONTABILIDAD
        'q0':{'1':'q1','2':'q19','P':'q70'},
        'q1':{'2':'q2'},
        'q2':{'4':'q3','5':'q3'},
        'q3':{'1':'q4','2':'q4','3':'q4','4':'q4','5':'q4','6':'q4','7':'q4','8':'q4','9':'q4','0':'q4'},
        'q4':{' ':'q5'},
        'q5':{'1':'q6','3':'q6','9':'q6','2':'q6'},
        'q6':{'1':'q7','2':'q7','4':'q7','5':'q7','6':'q7','7':'q7','8':'q7','9':'q7','0':'q7'},
        'q7':{'4':'q8','5':'q8','0':'q8'},
        'q8':{'7':'q9','8':'q9','9':'q9','0':'q9'},
        'q9':{'1':'q10','2':'q10','3':'q10','0':'q10'},
        'q10':{'1':'q11','2':'q11','3':'q11','4':'q11','5':'q11','6':'q11','7':'q11','8':'q11','9':'q11','0':'q11'},
        'q11':{'1':'q12','2':'q12','3':'q12','4':'q12','5':'q12','6':'q12','7':'q12','8':'q12','9':'q12','0':'q12'},
        'q12':{'1':'q13','2':'q13','3':'q13','4':'q13','5':'q13','6':'q13','7':'q13','8':'q13','9':'q13','0':'q13'},
        'q13':{' ':'q14'},
        'q14':{'0':'q15'},
        'q15':{'0':'q16'},
        'q16':{'1':'q17','2':'q17','3':'q17','4':'q17','5':'q17','6':'q17','7':'q17','8':'q17','9':'q17','0':'q17'},
        'q17':{'1':'q18','2':'q18','3':'q18','4':'q18','5':'q18','6':'q18','7':'q18','8':'q18','9':'q18','0':'q18'},
        'q18':{',':'q79'},
        'q19':{'1':'q20'},
        'q20':{'1':'q21',},
        'q21':{'2':'q22','5':'q38'},
        'q22':{'0':'q23'},
        'q23':{'0':'q24'},
        'q24':{'4':'q25',},
        'q25':{'0':'q26'},
        'q26':{'1':'q27'},
        'q27':{'1':'q28','2':'q53'},
        'q28':{'P':'q29'},
        'q29':{'D':'q30'},
        'q30':{'I':'q31'},
        'q31':{'1':'q32'},
        'q32':{'0':'q33'},
        'q33':{'0':'q34'},
        'q34':{'0':'q35'},
        'q35':{'8':'q36'},
        'q36':{'6':'q37'},
        'q37':{',':'q79'},
        'q38':{'0':'q39'},
        'q39':{'0':'q40'},
        'q40':{'4':'q41'},
        'q41':{'0':'q42'},
        'q42':{'1':'q43'},
        'q43':{'2':'q44'},
        'q44':{'P':'q45'},
        'q45':{'P':'q46'},
        'q46':{'A':'q47'},
        'q47':{'1':'q48'},
        'q48':{'0':'q49'},
        'q49':{'0':'q50'},
        'q50':{'0':'q51'},
        'q51':{'4':'q52'},
        'q52':{'9':'q37'},
        'q53':{'P':'q54'},
        'q54':{'P':'q55','D':'q63'},
        'q55':{'A':'q56'},
        'q56':{'1':'q57'},
        'q57':{'0':'q58'},
        'q58':{'0':'q59'},
        'q59':{'0':'q60'},
        'q60':{'2':'q61','4':'q61'},
        'q61':{'8':'q78'},
        'q62':{'D':'q63'},
        'q63':{'I':'q64'},
        'q64':{'1':'q65'},
        'q65':{'0':'q66'},
        'q66':{'0':'q67'},
        'q67':{'1':'q68'},
        'q68':{'5':'q69'},
        'q69':{'5':'q78'},
        'q70':{'F':'q71'},
        'q71':{'C':'q72'},
        'q72':{'E':'q73'},
        'q73':{' ':'q74'},
        'q74':{'2':'q75'},
        'q75':{'0':'q76'},
        'q76':{'1':'q77'},
        'q77':{'9':'q78'},
        'q78':{',':'q79'},#FINAL STATE 
        #AÑO DE COMPRA
        'q79':{'1':'q80','2':'q81'},
        'q80':{'1':'q82','2':'q82','3':'q82','4':'q82','5':'q82','6':'q82','7':'q82','8':'q82','9':'q82','0':'q82'},
        'q81':{'1':'q82','2':'q82','0':'q82'},
        'q82':{',':'q83'},#FINAL STATE 
        #CODIGO
        'q83':{'6':'q84'},
        'q84':{'0':'q85'},
        'q85':{'4':'q86'},
        'q86':{'0':'q87'},
        'q87':{'0':'q88'},
        'q88':{'1':'q89','2':'q90'},
        'q89':{'1':'q91','2':'q91','0':'q91','3':'q91','4':'q91','5':'q91','6':'q91','7':'q91','8':'q91','9':'q91'},
        'q90':{'1':'q91','2':'q91','0':'q91'},
        'q91':{'1':'q92'},
        'q92':{'0':'q93','1':'q93'},
        'q93':{'0':'q94'},
        'q94':{'1':'q95','2':'q95','3':'q95','4':'q95','5':'q95','6':'q95','7':'q95','8':'q95','9':'q95','0':'q95'},
        'q95':{'0':'q96','1':'q97','2':'q97','3':'q97','4':'q97','5':'q97','6':'q97','7':'q97','8':'q97','9':'q97'},
        'q96':{'1':'q98','2':'q98','3':'q98','4':'q98','5':'q98','6':'q98','7':'q98','8':'q98','9':'q98','0':'q98'},
        'q97':{'1':'q98','2':'q98','3':'q98','4':'q98','5':'q98','6':'q98','7':'q98','8':'q98','9':'q98','0':'q98'},
        'q98':{',':'q99',},#FINAL STATE 
        #CODIGO SISMOB WEB
        'q99':{'6':'q100','"':'q114'},
        'q100':{'0':'q101'},
        'q101':{'4':'q102'},
        'q102':{'0':'q103'},
        'q103':{'0':'q104'},
        'q104':{'1':'q105','2':'q106'},
        'q105':{'1':'q107','2':'q107','3':'q107','4':'q107','5':'q107','6':'q107','7':'q107','8':'q107','9':'q107','0':'q107'},
        'q106':{'0':'q107','1':'q107','2':'q107'},
        'q107':{'0':'q108'},
        'q108':{'0':'q109'},
        'q109':{'0':'q110'},
        'q110':{'0':'q111','1':'q111','2':'q111','3':'q111','4':'q111','5':'q111','6':'q111','7':'q111','8':'q111','9':'q111'},
        'q111':{'0':'q112','1':'q113','2':'q113','3':'q113','4':'q113','5':'q113','6':'q113','7':'q113','8':'q113','9':'q113'},
        'q112':{'1':'q117','2':'q117','3':'q117','4':'q117','5':'q117','6':'q117','7':'q117','8':'q117','9':'q117','0':'q117'},
        'q113':{'1':'q117','2':'q117','3':'q117','4':'q117','5':'q117','6':'q117','7':'q117','8':'q117','9':'q117','0':'q117'},
        'q114':{'#':'q115'},
        'q115':{'N':'q116'},
        'q116':{'/':'q134'},
        'q117':{',':'q118'},#FINAL STATE 
        #DESCRIPCION DEL BIEN
        'q118':{'1':'q119','A':'q120','B':'q120','C':'q120','D':'q120','E':'q120','F':'q120','G':'q120','H':'q120','I':'q120','J':'q120','K':'q120','L':'q120','M':'q120','N':'q120','O':'q120','P':'q120','Q':'q120','R':'q120','S':'q120','T':'q120','U':'q120','V':'q120','W':'q120','X':'q120','Y':'q120','Z':'q120','"':'q120'},
        'q119':{' ':'q120'},
        'q120':{' ':'q120','+':'q120',',':'q136','A':'q120','B':'q120','C':'q120','D':'q120','E':'q120','F':'q120','G':'q120','H':'q120','I':'q120','J':'q120','K':'q120','L':'q120','M':'q120','N':'q120','O':'q120','P':'q120','Q':'q120','R':'q120','S':'q120','T':'q120','U':'q120','V':'q120','W':'q120','X':'q120','Y':'q120','Z':'q120','a':'q120','b':'q120','c':'q120','d':'q120','e':'q120','f':'q120','g':'q120','h':'q120','i':'q120','j':'q120','k':'q120','l':'q120','m':'q120','n':'q120','o':'q120','p':'q120','q':'q120','r':'q120','s':'q120','t':'q120','u':'q120','v':'q120','w':'q120','x':'q120','y':'q120','z':'q120','0':'q120','1':'q120','2':'q120','3':'q120','4':'q120','5':'q120','6':'q120','7':'q120','8':'q120','9':'q120','"':'q120','(':'q120',')':'q120','-':'q120','.':'q120','á':'q120','é':'q120','í':'q120','ó':'q120','ú':'q120','ñ':'q120','ü':'q120','Á':'q120','É':'q120','Í':'q120','Ó':'q120','Ú':'q120','Ñ':'q120','Ü':'q120','"':'q120','/':'q120'},
        #FINAL STATE 
        #VALOR EN LIBROS
        'q121':{'$':'q122'},
        'q122':{' ':'q123'},
        'q123':{' ':'q123','1':'q124','2':'q124','3':'q124','4':'q124','5':'q124','6':'q124','7':'q124','8':'q124','9':'q124',},
        'q124':{'1':'q125','2':'q125','3':'q125','4':'q125','5':'q125','6':'q125','7':'q125','8':'q125','9':'q125','0':'q125',',':'q127'},
        'q125':{'1':'q126','2':'q126','3':'q126','4':'q126','5':'q126','6':'q126','7':'q126','8':'q126','9':'q126','0':'q126',',':'q127'},
        'q126':{',':'q127'},
        'q127':{'1':'q128','2':'q128','3':'q128','4':'q128','5':'q128','6':'q128','7':'q128','8':'q128','9':'q128','0':'q128'},
        'q128':{'1':'q129','2':'q129','3':'q129','4':'q129','5':'q129','6':'q129','7':'q129','8':'q129','9':'q129','0':'q129'},
        'q129':{'1':'q130','2':'q130','3':'q130','4':'q130','5':'q130','6':'q130','7':'q130','8':'q130','9':'q130','0':'q130'},
        'q130':{'.':'q131',',':'q127'},
        'q131':{'1':'q132','2':'q132','3':'q132','4':'q132','5':'q132','6':'q132','7':'q132','8':'q132','9':'q132','0':'q132'},
        'q132':{'1':'q133','2':'q133','3':'q133','4':'q133','5':'q133','6':'q133','7':'q133','8':'q133','9':'q133','0':'q133'},
        'q133':{'"':'q137'},
        'q134':{'A':'q135'},
        'q135':{'"':'q117'},
        'q136':{'"':'q121',' ':'q120'},
        'q137':{',':'q138'},#FINAL STATE 
        #PORCENTAJE DE DEPRECIACION
        'q138':{'1':'q139','2':'q139','3':'q139','4':'q139','5':'q139','6':'q139','7':'q139','8':'q139','9':'q139','0':'q139'},
        'q139':{'1':'q140','2':'q140','3':'q140','4':'q140','5':'q140','6':'q140','7':'q140','8':'q140','9':'q140','0':'q140','.':'q141',',':'q144'},
        'q140':{'.':'q141',',':'q144'},
        'q141':{'1':'q142','2':'q142','3':'q142','4':'q142','5':'q142','6':'q142','7':'q142','8':'q142','9':'q142','0':'q142'},
        'q142':{'1':'q143','2':'q143','3':'q143','4':'q143','5':'q143','6':'q143','7':'q143','8':'q143','9':'q143','0':'q143',',':'q144'},
        'q143':{',':'q144'},#FINAL STATE 
        #AÑOS TRANSCURRIDOS
        'q144':{'1':'q145','2':'q145','3':'q145','4':'q145','5':'q145','6':'q145','7':'q145','8':'q145','9':'q145','0':'q145'},
        'q145':{',':'q146'},#FINAL STATE 
        #PRECIO DEPRECIADO
        'q146':{'"':'q147'},
        'q147':{'$':'q148'},
        'q148':{' ':'q148','1':'q149','2':'q149','3':'q149','4':'q149','5':'q149','6':'q149','7':'q149','8':'q149','9':'q149'},
        'q149':{'1':'q150','2':'q150','3':'q150','4':'q150','5':'q150','6':'q150','7':'q150','8':'q150','9':'q150','0':'q150',',':'q152'},
        'q150':{'1':'q151','2':'q151','3':'q151','4':'q151','5':'q151','6':'q151','7':'q151','8':'q151','9':'q151','0':'q151',',':'q152'},
        'q151':{',':'q152'},
        'q152':{'1':'q153','2':'q153','3':'q153','4':'q153','5':'q153','6':'q153','7':'q153','8':'q153','9':'q153','0':'q153'},
        'q153':{'1':'q154','2':'q154','3':'q154','4':'q154','5':'q154','6':'q154','7':'q154','8':'q154','9':'q154','0':'q154'},
        'q154':{'1':'q155','2':'q155','3':'q155','4':'q155','5':'q155','6':'q155','7':'q155','8':'q155','9':'q155','0':'q155'},
        'q155':{'.':'q156',',':'q152'},
        'q156':{'1':'q157','2':'q157','3':'q157','4':'q157','5':'q157','6':'q157','7':'q157','8':'q157','9':'q157','0':'q157'},
        'q157':{'1':'q158','2':'q158','3':'q158','4':'q158','5':'q158','6':'q158','7':'q158','8':'q158','9':'q158','0':'q158'},
        'q158':{'"':'q159'},
        'q159':{',':'q160'},#FINAL STATE 
        #TOTAL CONTABLE
        'q160':{'"':'q161'},
        'q161':{'$':'q162'},
        'q162':{' ':'q162','1':'q163','2':'q163','3':'q163','4':'q163','5':'q163','6':'q163','7':'q163','8':'q163','9':'q163'},
        'q163':{'1':'q164','2':'q164','3':'q164','4':'q164','5':'q164','6':'q164','7':'q164','8':'q164','9':'q164','0':'q164',',':'q166'},
        'q164':{'1':'q165','2':'q165','3':'q165','4':'q165','5':'q165','6':'q165','7':'q165','8':'q165','9':'q165','0':'q165',',':'q166'},
        'q165':{',':'q166'},
        'q166':{'1':'q167','2':'q167','3':'q167','4':'q167','5':'q167','6':'q167','7':'q167','8':'q167','9':'q167','0':'q167'},
        'q167':{'1':'q168','2':'q168','3':'q168','4':'q168','5':'q168','6':'q168','7':'q168','8':'q168','9':'q168','0':'q168'},
        'q168':{'1':'q169','2':'q169','3':'q169','4':'q169','5':'q169','6':'q169','7':'q169','8':'q169','9':'q169','0':'q169'},
        'q169':{'.':'q170',',':'q166'},
        'q170':{'1':'q171','2':'q171','3':'q171','4':'q171','5':'q171','6':'q171','7':'q171','8':'q171','9':'q171','0':'q171'},
        'q171':{'1':'q172','2':'q172','3':'q172','4':'q172','5':'q172','6':'q172','7':'q172','8':'q172','9':'q172','0':'q172'},
        'q172':{'"':'q173'},
        'q173':{},#FINAL STATE  
    },
    allow_partial=True,
    initial_state='q0',
    final_states={'q78','q82','q87','q98','q117','q120','q138','q143','q145','q143','q159','q173'}
)
my_input_str=""
i=0
with open('1.txt') as f:
    # my_imput_str=""
    data_txt=[line for line in f.readlines()]
    for line in data_txt:
        data_str=(data_txt[i])
        my_input_str=data_str.strip("\n")
        print(i+1) 
        i=i+1   
        if dfa.accepts_input(my_input_str):
            print("Cadena aceptada")    
            # pass
        else:
            print(i)
            print('rejected')

   
    
# my_input_str='1241 91471121 0003,21,6040021100016,6040021000009,1 Bandeja para 520 Hojas p/Versalink+ Gabinete,"$                       10,306.60",33.33,1,"$                  6,871.41","$                        10,306.60"'
# if dfa.accepts_input(my_input_str):
#     print('accepted')
# else:
#     print('rejected')
